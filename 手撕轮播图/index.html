<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>手撕轮播图</title>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <ul class="banner"></ul>
  </body>
  <script>
    window.addEventListener('load', function () {
      let timer = setInterval(get_nex, 3000)
      let sz = new Array()
      var cur_ul = document.querySelector('.banner')
      console.log(cur_ul)
      // setInterval()

      // 初始化图片
      for (let i = 0; i < 5; i++) {
        let cur_li = document.createElement('li')
        let cur_img = document.createElement('img')
        cur_img.src = `./image/${i + 1}.jpg`
        cur_img.style.width = '400px'
        cur_img.style.height = '200px'
        cur_ul.style.borderradius = '20px'
        cur_li.appendChild(cur_img)

        cur_ul.appendChild(cur_li)
        sz.push(cur_li)
        sz[sz.length - 1].style.left = '0px'
      }
      // 初始化选择最后三张
      let len = sz.length - 1
      sz[len - 2].style.left = '0px'
      sz[len - 1].style.left = '200px'
      sz[len - 1].style.zIndex = 100
      sz[len - 1].style.transform = 'scale(1.3)'
      sz[len].style.left = '400px'
      // 下一页
      function get_nex() {
        let get_up = sz[len]
        sz.pop()
        sz.unshift(get_up)
        // 初始化优先级以及排序
        for (let i = 0; i < sz.length; i++) {
          console.log(sz[i])
          sz[i].style.zIndex = i
          sz[len].style.transform = 'scale(1)'
        }
        sz[len - 2].style.left = '0px'
        sz[len - 1].style.left = '200px'
        sz[len - 1].style.zIndex = 100
        sz[len - 1].style.transform = 'scale(1.3)'
        sz[len - 1].style.opacity = 1
        sz[len].style.left = '400px'
      }
      // 上一页
      function get_pre() {
        let get_up = sz[0]
        sz.shift()
        sz.push(get_up)
        // 初始化
        for (let i = 0; i < sz.length; i++) {
          console.log(sz[i])
          sz[i].style.zIndex = i
          sz[len - 2].style.transform = 'scale(1)'
        }
        sz[len - 2].style.left = '0px'
        sz[len - 1].style.left = '200px'
        sz[len - 1].style.zIndex = 100
        sz[len - 1].style.transform = 'scale(1.3)'
        sz[len - 1].style.opacity = 1
        sz[len].style.left = '400px'
      }
      // pre箭头
      let pre_img = document.createElement('img')
      pre_img.src = 'image/preimg.png'
      pre_img.style.position = 'absolute'
      pre_img.style.right = '30px'
      pre_img.style.top = 0
      pre_img.style.bottom = 0
      pre_img.style.margin = 'auto'
      pre_img.style.zIndex = 100
      pre_img.style.width = '50px'
      pre_img.style.height = '50px'
      cur_ul.appendChild(pre_img)
      // 点击右箭头
      pre_img.addEventListener('click', function () {
        clearInterval(timer)
        get_nex()
        timer = setInterval(get_nex, 3000)
      })

      let nex_img = document.createElement('img')
      nex_img.src = 'image/neximg.png'
      nex_img.style.position = 'absolute'
      nex_img.style.left = 0
      nex_img.style.top = 0
      nex_img.style.bottom = 0
      nex_img.style.margin = 'auto'
      nex_img.style.zIndex = 100
      nex_img.style.width = '50px'
      nex_img.style.height = '50px'
      cur_ul.appendChild(nex_img)
      // 点击左键头
      nex_img.addEventListener('click', function () {
        clearInterval(timer)
        get_pre()
        timer = setInterval(get_pre, 3000)
      })
    })
  </script>
</html>
